{"version":3,"sources":["event_emitter.min.js"],"names":["root","factory","define","amd","require","_","module","specified","Khoai","EventEmitter","this","uniqueID","prefix","unique_ids","hasOwnProperty","type_prefix","id","_events","_listeners","_listening","_mimics","_private_events","unlinkListenerEvent","instance","listener_key","event","index_key","events","getListenerOptions","options","isNumber","priority","defaults","times","context","key","async","delay","getAllListenerKeys","listener","result","each","detail","push","arrayToObject","array","castArray","zipObject","fill","Array","length","_emit_event","event_name","data","listeners","getListeners","listener_detail","async_callback","do_callback","event_index_key","removeListener","is_private_event","isObject","is_mimic","target","isBoolean","get_listen_id","mimics","event_detail","cloneDeep","sortBy","callback","args","arguments","isArray","callback_item","apply","isFunction","parseInt","isNaN","isFinite","setTimeout","Math","max","name","findKey","notify_listen_callback","host","source","isListening","listen_detail","is_valid_listening_event","only","except","event_data","prototype","slice","call","keys","target_event","emitEvent","concat","un_listen","listen_id","isString","remove_method","resetEvents","flatten","toArray","self","removed","set","join","removed_events","index_keys","removed_event","omit","isEmpty","reset","addListener","uniq","Error","target_events","size","extend","on","has","listening","isUndefined","listener_events","listener_keys","shift","intersection","removeListeners","addOnceListener","addListeners","events_arr","event_cbs","event_cb","cb","event_info","mimic","filter","isMimic","private","emit","trigger","emitEventThen","final_cb","emitThen","triggerThen","listen","isArrayLike","add_method","listen_options","isNull","unlisten","map","partial","isEventEmitter","object"],"mappings":"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","file":"event_emitter.min.js","sourcesContent":["!function(e,t){if(\"function\"==typeof define&&define.amd)define([\"require\",\"lodash\"],function(i,n){var s=t(n);return i.specified(\"khoaijs\")&&i([\"khoaijs\"],function(e){e.EventEmitter=s}),e.EventEmitter=s,s});else{var i=t(e._);e.Khoai&&(e.Khoai.EventEmitter=i),e.EventEmitter=i}}(this,function(e){\"use strict\";function t(e){return f.hasOwnProperty(e)||(f[e]=0),e+ ++f[e]}function i(){this.type_prefix=this.type_prefix?this.type_prefix:\"event_emitter\",this.id=this.id?this.id:t(this.type_prefix+\"_\"),this._events={},this._listeners={},this._listening={},this._mimics={},this._private_events={}}function n(e,t,i,n){return!!e._listeners.hasOwnProperty(t)&&(!!e._listeners[t].events.hasOwnProperty(i)&&(delete e._listeners[t].events[i][n],!0))}function s(t,i){return e.isNumber(i)&&(i={priority:i}),i=e.defaults(i||{},{priority:500,times:!0,context:null,key:\"\",async:!1,delay:1})}function r(t,i){var n=[];return e.each(t._listeners,function(e,t){e.listener===i&&n.push(t)}),n}function o(t){return t=e.castArray(t),e.zipObject(t,e.fill(new Array(t.length),!0))}function a(t,i,n){var s;t._events.hasOwnProperty(i)&&(s=l(t,i),s.length&&e.each(s,function(e){if(!0===e.times||e.times>0){if(e.async?y(e.listener,n,e.context||t,e.delay):p(e.listener,n,e.context||t),!0===e.times)return;if(--e.times>0)return void(t._events[i][e.event_index_key].times=e.times)}t.removeListener(e.listener_key,i)}))}function c(t,i){return!0===t._private_events||e.isObject(t._private_events)&&t._private_events.hasOwnProperty(i)}function h(t,i,n){return e.isBoolean(t._mimics)?t._mimics:!(!e.isObject(t._mimics)||!t._mimics.hasOwnProperty(i))||(n?!(!(n=_(t,e.isObject(n)?n.id:n))||!(!0===t._listening[n].mimics||e.isObject(t._listening[n].mimics)&&t._listening[n].mimics.hasOwnProperty(i))):t._mimics.hasOwnProperty(i))}function l(t,i){if(!t._events.hasOwnProperty(i))return[];var n=[];return e.each(t._events[i],function(i,s){t._listeners.hasOwnProperty(i.listener_key)&&(i.listener=t._listeners[i.listener_key].listener,i.event_index_key=s,n.push(e.cloneDeep(i)))}),e.sortBy(n,\"priority\")}function p(t,i,n){if(i=arguments.length>=2?e.castArray(i):[],t){if(e.isArray(t)){var s=[];return e.each(t,function(e){s.push(e.apply(n||null,i))}),s}if(e.isFunction(t))return t.apply(n||null,i)}}function y(t,i,n,s){return s=parseInt(s),!e.isNaN(s)&&e.isFinite(s)||(s=1),setTimeout(function(){p(t,i,n||null)},Math.max(1,s))}function _(t,i){return t._listening.hasOwnProperty(i)?i:e.findKey(t._listening,[\"name\",i])}function m(t,i,n,s){var r=this;if(t.isListening(r)){var o=t._listening[r.id];if(v(n,o.only,o.except)){var a=Array.prototype.slice.call(arguments,3),c={};c[r.id+\".\"+n]=!0,c[i+\".\"+n]=!0,h(t,n,r.id)&&(c[n]=!0),e.each(e.keys(c),function(e){t.emitEvent.apply(t,[e].concat(a))}),t.emitEvent.apply(t,[\"notified\",n].concat(a))}}}function v(e,t,i){return!i.hasOwnProperty(e)&&(!0===t||t.hasOwnProperty(e))}function u(t,i){var n=t._listening[i];n&&(t.emitEvent(\"before_unlisten\",n.target,n),e.isString(n.remove_method)?n.target[n.remove_method](n.listener_key):n.remove_method(n.listener_key),t.emitEvent(\"unlisten\",n.target,n),delete t._listening[i])}var f={};return i.prototype.resetEvents=function(t){t=arguments.length?e.flatten(e.toArray(arguments)):e.keys(this._events);var i=this,s={};return e.each(t,function(t){i._events.hasOwnProperty(t)&&(e.each(i._events[t],function(r,o){n(i,r.listener_key,t,o)&&e.set(s,[r.listener_key,t,o].join(\".\"),!0)}),delete i._events[t])}),e.each(s,function(t,n){e.each(t,function(t,s){i._listeners[n].events[s]=e.omit(i._listeners[n].events[s],e.keys(t)),e.isEmpty(i._listeners[n].events[s])&&delete i._listeners[n].events[s]})}),this},i.prototype.reset=i.prototype.resetEvents,i.prototype.addListener=function(i,n,r){var o,a=this;if(i=e.uniq(e.castArray(i)),r=s(this,r),e.isString(n)){if(!this._listeners.hasOwnProperty(n))throw new Error(\"Listener is not added\");o=n}else o=r.key?r.key:t(this.id+\"_listener_\"),this._listeners[o]={listener:n,events:{}};return e.each(i,function(t){a._events.hasOwnProperty(t)||(a._events[t]={});var i=a._events[t],n=\"_\"+e.size(i);i[n]=e.extend({},r,{listener_key:o}),a._listeners[o].events.hasOwnProperty(t)||(a._listeners[o].events[t]={}),a._listeners[o].events[t][n]=!0}),o},i.prototype.on=i.prototype.addListener,i.prototype.has=function(t,i){return i=i||e.isUndefined(i),this._listeners.hasOwnProperty(t)&&(!i||!e.isEmpty(this._listeners[t].events))},i.prototype.removeListener=function(t,i){var n,s,o,a=this,c=e.isString(t)?[t]:r(this,t);if(c.length)for(;n=c.shift();)this._listeners.hasOwnProperty(n)&&(s=e.keys(this._listeners[n].events),o=e.isUndefined(i)?s:e.intersection(e.castArray(i),s),e.each(o,function(t){a._events.hasOwnProperty(t)&&(a._events[t]=e.omit(a._events[t],e.keys(a._listeners[n].events[t])),delete a._listeners[n].events[t])}))},i.prototype.removeListeners=function(t,i){var n=this;e.each(t,function(e){n.removeListener(e,i)})},i.prototype.addOnceListener=function(t,i,n){return e.isNumber(n)?n={priority:n}:e.isObject(n)||(n={}),n.times=1,this.addListener(t,i,n)},i.prototype.addListeners=function(t){var i=[],n=this,s=[];return e.isObject(t)&&e.each(t,function(t,n){t=e.castArray(t),e.each(t,function(t){t=e.castArray(t),i.push({name:n,cb:t[0],options:t.length>1?t[1]:{}})})}),e.each(i,function(e){s.push(n.addListener(e.name,e.cb,e.options))}),s},i.prototype.mimic=function(t,i){if(!arguments.length)return void(this._mimics=!0);if(1==arguments.length)return void(e.isBoolean(t)?this._mimics=t:e.isObject(t)&&!e.isArray(t)&&this.isListening(t)?this._listening[_(this,t.id||t)].mimics=!0:(t=e.filter(e.flatten(e.castArray(t)),e.isString),t=o(t),e.isObject(this._mimics)?e.extend(this._mimics,t):this._mimics=t));if(!(i=_(this,e.isObject(i)?i.id:i)))throw new Error(\"Invalid target\");if(e.isBoolean(t)){if(!this.isListening(i))throw new Error(\"The target is not listening\");return void(this._listening[i].mimics=t)}var n=this;t=e.castArray(t),e.each(t,function(t){e.isObject(n._listening[i].mimics)||(n._listening[i].mimics={}),n._listening[i].mimics[t]=!0})},i.prototype.isMimic=function(e,t){return h(this,e,t)},i.prototype.private=function(t){e.isBoolean(t)?this._private_events=!!t||{}:(t=e.filter(e.toArray(arguments),e.isString),e.isObject(this._private_events)||(this._private_events={}),e.extend(this._private_events,o(t)))},i.prototype.emitEvent=function(e,t){t=Array.prototype.slice.call(arguments,1),this._events.hasOwnProperty(e)&&a(this,e,t),this._events.hasOwnProperty(\"notify\")&&!c(this,e)&&a(this,\"notify\",[e].concat(t)),a(this,e+\"_complete\",t),\"event_emitted\"!==e&&a(this,\"event_emitted\",[e].concat(t))},i.prototype.emit=i.prototype.emitEvent,i.prototype.trigger=i.prototype.emitEvent,i.prototype.emitEventThen=function(e,t,i){i=Array.prototype.slice.call(arguments,2),this.emitEvent.apply(this,[e].concat(i)),t.apply(this,i)},i.prototype.emitThen=i.prototype.emitEventThen,i.prototype.triggerThen=i.prototype.emitEventThen,i.prototype.isListening=function(t,i){var n=e.isObject(t)?t.id:t;return!!(e.isString(n)||e.isNumber(n)&&e.isFinite(n)&&!e.isNaN(n))&&(!this._listening.hasOwnProperty(n)||e.isObject(t)&&this._listening[n].target!==t?(n=_(this,n),!e.isUndefined(n)):!i||v(i,this._listening[n].only,this._listening[n].except))},i.prototype.listen=function(t,i,n){if(!e.isObject(t))throw new Error(\"Listen target must be an object\");if(this.isListening(t))return!0;e.isString(i)||(n=i,i=t.id),e.isArrayLike(n)&&(n={only:o(n)}),n=e.defaults(n||{},{target:t,name:i,only:!0,except:{},async:!0,add_method:\"addListener\",remove_method:\"removeListener\",event:\"notify\",mimics:{}}),e.isBoolean(n.mimics)||(n.mimics=o(n.mimics)),e.isBoolean(n.only)||(n.only=o(n.only)),n.except=o(n.except);var s=this,r=function(){m.apply(this,[s,i].concat(Array.prototype.slice.call(arguments)))},a={async:n.async};if(this.emitEvent(\"before_listen\",t,n),e.isString(n.add_method)?n.listener_key=t[n.add_method](n.event,r,a):n.listener_key=n.add_method(this,t,n,r,a),e.isUndefined(n.listener_key)||e.isNull(n.listener_key))throw new Error(\"Added listener key received by add method is invalid\");return this.emitEvent(\"listen\",t,n),this._listening[t.id]=e.omit(n,[\"async\",\"add_method\",\"event\"]),n.listener_key},i.prototype.unlisten=function(t){arguments.length?(t=e.isObject(t)?t.id:t,this.isListening(t)&&u(this,t)):(e.map(e.keys(this._listening),e.partial(u,this)),this._listening={})},i.isEventEmitter=function(e){return e instanceof i},i});\n//# sourceMappingURL=event_emitter.min.js.map\n"]}