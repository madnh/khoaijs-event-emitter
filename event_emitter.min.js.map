{"version":3,"sources":["event_emitter.min.js"],"names":["root","factory","define","amd","require","_","module","specified","Khoai","EventEmitter","this","uniqueID","prefix","unique_ids","hasOwnProperty","type_prefix","id","_events","_listeners","_listening","_mimics","_private_events","bound","unlinkListenerEvent","instance","listener_key","event","index_key","events","getListenerOptions","options","isNumber","priority","defaults","times","context","key","async","delay","getAllListenerKeys","listener","result","each","detail","push","arrayToObject","array","castArray","zipObject","fill","Array","length","_emit_event","event_name","data","listeners","getListeners","listener_detail","async_callback","do_callback","event_index_key","removeListener","is_private_event","isObject","is_mimic","target","isBoolean","get_listen_id","mimics","event_detail","cloneDeep","sortBy","callback","args","arguments","isArray","callback_item","apply","isFunction","parseInt","isNaN","isFinite","setTimeout","Math","max","name","findKey","notify_listen_callback","host","source","isListening","listen_detail","is_valid_listening_event","only","except","event_data","prototype","slice","call","keys","target_event","emitEvent","concat","un_listen","listen_id","isString","remove_method","resetEvents","flatten","toArray","self","removed","set","join","removed_events","index_keys","removed_event","omit","isEmpty","reset","addListener","uniq","Error","target_events","size","extend","on","has","listening","isUndefined","listener_events","listener_keys","shift","intersection","removeListeners","addOnceListener","addListeners","events_arr","event_cbs","event_cb","cb","event_info","mimic","filter","isMimic","private","emit","trigger","emitEventThen","final_cb","emitThen","triggerThen","listen","isArrayLike","add_method","listen_options","isNull","unlisten","map","partial","isEventEmitter","object"],"mappings":"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","file":"event_emitter.min.js","sourcesContent":["!function(e,t){if(\"function\"==typeof define&&define.amd)define([\"require\",\"lodash\"],function(i,n){var s=t(n);return i.specified(\"khoaijs\")&&i([\"khoaijs\"],function(e){e.EventEmitter=s}),e.EventEmitter=s,s});else{var i=t(e._);e.Khoai&&(e.Khoai.EventEmitter=i),e.EventEmitter=i}}(this,function(e){\"use strict\";function t(e){return f.hasOwnProperty(e)||(f[e]=0),e+ ++f[e]}function i(){this.type_prefix=this.type_prefix?this.type_prefix:\"event_emitter\",this.id=this.id?this.id:t(this.type_prefix+\"_\"),this._events={},this._listeners={},this._listening={},this._mimics={},this._private_events={}}function n(e,t,i,n){return!!e._listeners.hasOwnProperty(t)&&(!!e._listeners[t].events.hasOwnProperty(i)&&(delete e._listeners[t].events[i][n],!0))}function s(t,i){return e.isNumber(i)&&(i={priority:i}),i=e.defaults(i||{},{priority:500,times:!0,context:null,key:\"\",async:!1,delay:1})}function r(t,i){var n=[];return e.each(t._listeners,function(e,t){e.listener===i&&n.push(t)}),n}function o(t){return t=e.castArray(t),e.zipObject(t,e.fill(new Array(t.length),!0))}function a(t,i,n){var s;t._events.hasOwnProperty(i)&&(s=l(t,i),s.length&&e.each(s,function(e){if(!0===e.times||e.times>0){if(e.async?y(e.listener,n,e.context||t,e.delay):p(e.listener,n,e.context||t),!0===e.times)return;if(--e.times>0)return void(t._events[i][e.event_index_key].times=e.times)}t.removeListener(e.listener_key,i)}))}function c(t,i){return!0===t._private_events||e.isObject(t._private_events)&&t._private_events.hasOwnProperty(i)}function h(t,i,n){return e.isBoolean(t._mimics)?t._mimics:!(!e.isObject(t._mimics)||!t._mimics.hasOwnProperty(i))||(n?!(!(n=_(t,e.isObject(n)?n.id:n))||!(!0===t._listening[n].mimics||e.isObject(t._listening[n].mimics)&&t._listening[n].mimics.hasOwnProperty(i))):t._mimics.hasOwnProperty(i))}function l(t,i){if(!t._events.hasOwnProperty(i))return[];var n=[];return e.each(t._events[i],function(i,s){t._listeners.hasOwnProperty(i.listener_key)&&(i.listener=t._listeners[i.listener_key].listener,i.event_index_key=s,n.push(e.cloneDeep(i)))}),e.sortBy(n,\"priority\")}function p(t,i,n){if(i=arguments.length>=2?e.castArray(i):[],t){if(e.isArray(t)){var s=[];return e.each(t,function(e){s.push(e.apply(n||null,i))}),s}if(e.isFunction(t))return t.apply(n||null,i)}}function y(t,i,n,s){return s=parseInt(s),!e.isNaN(s)&&e.isFinite(s)||(s=1),setTimeout(function(){p(t,i,n||null)},Math.max(1,s))}function _(t,i){return t._listening.hasOwnProperty(i)?i:e.findKey(t._listening,[\"name\",i])}function m(t,i,n,s){var r=this;if(t.isListening(r)){var o=t._listening[r.id];if(v(n,o.only,o.except)){var a=Array.prototype.slice.call(arguments,3),c={};c[r.id+\".\"+n]=!0,c[i+\".\"+n]=!0,h(t,n,r.id)&&(c[n]=!0),e.each(e.keys(c),function(e){t.emitEvent.apply(t,[e].concat(a))}),t.emitEvent.apply(t,[\"notified\",n].concat(a))}}}function v(e,t,i){return!i.hasOwnProperty(e)&&(!0===t||t.hasOwnProperty(e))}function u(t,i){var n=t._listening[i];n&&(t.emitEvent(\"before_unlisten\",n.target,n),e.isString(n.remove_method)?n.target[n.remove_method](n.listener_key):n.remove_method(n.listener_key),t.emitEvent(\"unlisten\",n.target,n),delete t._listening[i])}var f={};return i.prototype.resetEvents=function(t){t=arguments.length?e.flatten(e.toArray(arguments)):e.keys(this._events);var i=this,s={};return e.each(t,function(t){i._events.hasOwnProperty(t)&&(e.each(i._events[t],function(r,o){n(i,r.listener_key,t,o)&&e.set(s,[r.listener_key,t,o].join(\".\"),!0)}),delete i._events[t])}),e.each(s,function(t,n){e.each(t,function(t,s){i._listeners[n].events[s]=e.omit(i._listeners[n].events[s],e.keys(t)),e.isEmpty(i._listeners[n].events[s])&&delete i._listeners[n].events[s]})}),this},i.prototype.reset=i.prototype.resetEvents,i.prototype.addListener=function(i,n,r){var o,a=this;if(i=e.uniq(e.castArray(i)),r=s(this,r),e.isString(n)){if(!this._listeners.hasOwnProperty(n))throw new Error(\"Listener is not added\");o=n}else o=r.key?r.key:t(this.id+\"_listener_\"),this._listeners[o]={listener:n,events:{}};return e.each(i,function(t){a._events.hasOwnProperty(t)||(a._events[t]={});var i=a._events[t],n=\"_\"+e.size(i);i[n]=e.extend({},r,{listener_key:o}),a._listeners[o].events.hasOwnProperty(t)||(a._listeners[o].events[t]={}),a._listeners[o].events[t][n]=!0}),o},i.prototype.on=i.prototype.addListener,i.prototype.has=function(t,i){return i=i||e.isUndefined(i),this._listeners.hasOwnProperty(t)&&(!i||!e.isEmpty(this._listeners[t].events))},i.prototype.removeListener=function(t,i){var n,s,o,a=this,c=e.isString(t)?[t]:r(this,t);if(c.length)for(;n=c.shift();)this._listeners.hasOwnProperty(n)&&(s=e.keys(this._listeners[n].events),o=e.isUndefined(i)?s:e.intersection(e.castArray(i),s),e.each(o,function(t){a._events.hasOwnProperty(t)&&(a._events[t]=e.omit(a._events[t],e.keys(a._listeners[n].events[t])),delete a._listeners[n].events[t])}))},i.prototype.removeListeners=function(t,i){var n=this;e.each(t,function(e){n.removeListener(e,i)})},i.prototype.addOnceListener=function(t,i,n){return e.isNumber(n)?n={priority:n}:e.isObject(n)||(n={}),n.times=1,this.addListener(t,i,n)},i.prototype.addListeners=function(t){var i=[],n=this,s=[];return e.isObject(t)&&e.each(t,function(t,n){t=e.castArray(t),e.each(t,function(t){t=e.castArray(t),i.push({name:n,cb:t[0],options:t.length>1?t[1]:{}})})}),e.each(i,function(e){s.push(n.addListener(e.name,e.cb,e.options))}),s},i.prototype.mimic=function(t,i){if(!arguments.length)return void(this._mimics=!0);if(1==arguments.length)return void(e.isBoolean(t)?this._mimics=t:e.isObject(t)&&!e.isArray(t)&&this.isListening(t)?this._listening[_(this,t.id||t)].mimics=!0:(t=e.filter(e.flatten(e.castArray(t)),e.isString),t=o(t),e.isObject(this._mimics)?e.extend(this._mimics,t):this._mimics=t));if(!(i=_(this,e.isObject(i)?i.id:i)))throw new Error(\"Invalid target\");if(e.isBoolean(t)){if(!this.isListening(i))throw new Error(\"The target is not listening\");return void(this._listening[i].mimics=t)}var n=this;t=e.castArray(t),e.each(t,function(t){e.isObject(n._listening[i].mimics)||(n._listening[i].mimics={}),n._listening[i].mimics[t]=!0})},i.prototype.isMimic=function(e,t){return h(this,e,t)},i.prototype.private=function(t){e.isBoolean(t)?this._private_events=!!t||{}:(t=e.filter(e.toArray(arguments),e.isString),e.isObject(this._private_events)||(this._private_events={}),e.extend(this._private_events,o(t)))},i.prototype.emitEvent=function(e,t){t=Array.prototype.slice.call(arguments,1),this._events.hasOwnProperty(e)&&a(this,e,t),this._events.hasOwnProperty(\"notify\")&&!c(this,e)&&a(this,\"notify\",[e].concat(t)),a(this,e+\"_complete\",t),\"event_emitted\"!==e&&a(this,\"event_emitted\",[e].concat(t))},i.prototype.emit=i.prototype.emitEvent,i.prototype.trigger=i.prototype.emitEvent,i.prototype.emitEventThen=function(e,t,i){i=Array.prototype.slice.call(arguments,2),this.emitEvent.apply(this,[e].concat(i)),t.apply(this,i)},i.prototype.emitThen=i.prototype.emitEventThen,i.prototype.triggerThen=i.prototype.emitEventThen,i.prototype.isListening=function(t,i){var n=e.isObject(t)?t.id:t;return!!(e.isString(n)||e.isNumber(n)&&e.isFinite(n)&&!e.isNaN(n))&&(!this._listening.hasOwnProperty(n)||e.isObject(t)&&this._listening[n].target!==t?(n=_(this,n),!e.isUndefined(n)):!i||v(i,this._listening[n].only,this._listening[n].except))},i.prototype.listen=function(t,i,n){if(!e.isObject(t))throw new Error(\"Listen target must be an object\");if(this.isListening(t))return!0;e.isString(i)||(n=i,i=t.id),e.isArrayLike(n)&&(n={only:o(n)}),n=e.defaults(n||{},{target:t,name:i,only:!0,except:{},async:!0,add_method:\"addListener\",remove_method:\"removeListener\",event:\"notify\",mimics:{}}),e.isBoolean(n.mimics)||(n.mimics=o(n.mimics)),e.isBoolean(n.only)||(n.only=o(n.only)),n.except=o(n.except);var s=this,r=function(){m.apply(this,[s,i].concat(Array.prototype.slice.call(arguments)))},a={async:n.async};if(this.emitEvent(\"before_listen\",t,n),e.isString(n.add_method)?n.listener_key=t[n.add_method](n.event,r,a):n.listener_key=n.add_method(this,t,n,r,a),e.isUndefined(n.listener_key)||e.isNull(n.listener_key))throw new Error(\"Added listener key received by add method is invalid\");return this.emitEvent(\"listen\",t,n),this._listening[t.id]=e.omit(n,[\"async\",\"add_method\",\"event\"]),n.listener_key},i.prototype.unlisten=function(t){arguments.length?(t=e.isObject(t)?t.id:t,this.isListening(t)&&u(this,t)):(e.map(e.keys(this._listening),e.partial(u,this)),this._listening={})},i.isEventEmitter=function(e){return e instanceof i},i});\r\n//# sourceMappingURL=event_emitter.min.js.map\r\n"]}